{% extends "BGpt/layout.html" %}
{% load static %}

{% block body %} 
<div class="row">
    <div class="col-4">
        <ul class="list-group">
            {% for h in history %}
            {% ifchanged %}
            <a class="list-group-item" data-id="ch-{{ h.session }}" href="#chat-{{ h.session }}" role="tab" aria-controls="list-{{ h.session }}">
                <li class="title-list">{{ h.title }}</li>    
            </a>
            {% endifchanged %}
            {% endfor %}
        </ul>
    </div>

    <!-- paginator -->
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if history.has_previous %}
            <li class="page-item"><a href="?page=1" class="page-link">&laquo; first</a></li>
            <li class="page-item"><a href="?page={{ history.previous_page_number }}" class="page-link">previous</a></li>
            {% endif %}

            <!-- <span class="page-item">
                {% for p in history.paginator.page_range  %}
                <li class="page-item"><a href="?page={{ p }}" class="page-link">{{ p }}</a></li>
                {% endfor %}
            </span> -->

            {% if history.has_next %}
            <li class="page-item"><a href="?page={{ history.next_page_number }}" class="page-link">next</a></li>
            <li class="page-item"><a href="?page={{ history.paginator.num_pages }}" class="page-link">last &raquo;</a></li>
            {% endif %}
        </ul>
    </nav>

    <div class="col-8">
        <ul class="list-group list-group-responses">
            {% for h in history %}
            <li id="inp{{ h.pk }}" data-id="ch-{{ h.session }}">{{ h.input }}</li>
            <li id="resp{{ h.pk }}" data-id="ch-{{ h.session }}">{{ h.response }}</li>
            {% endfor %}
        </ul>
    </div>
</div>

{% endblock %}
{% block page_scripts %}
<script src="/static/BGpt/history.js"></script>
{% endblock %}